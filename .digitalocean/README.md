# DigitalOcean Deployment Resources

This directory contains everything you need to deploy your AsterDEX Trading API to DigitalOcean.

> üìñ **New to these docs?** Check [INDEX.md](INDEX.md) for a complete guide to all documentation.

## üöÄ Quick Commands

### For New Droplet Setup
```bash
# SSH into your droplet
ssh root@YOUR_DROPLET_IP

# Clone your repo
git clone YOUR_REPO_URL /opt/asterdex-trading-api
cd /opt/asterdex-trading-api

# Run setup script
bash .digitalocean/droplet-setup.sh
```

### For Updating Existing Droplet
```bash
# SSH into your droplet
ssh root@YOUR_DROPLET_IP
cd /opt/asterdex-trading-api

# Pull latest changes
git pull

# Update nginx and welcome page
bash .digitalocean/update-nginx-welcome.sh

# Or re-run full setup (idempotent - safe to run multiple times)
bash .digitalocean/droplet-setup.sh
```

## üìö Documentation

### üöÄ [QUICK_START.md](QUICK_START.md)
**Start here!** 5-minute guide to deploy using App Platform (recommended).

### üìñ [Full Deployment Guide](../DIGITALOCEAN_DEPLOYMENT.md)
Comprehensive guide covering:
- App Platform deployment (recommended)
- Droplet/VPS deployment
- Security configuration
- SSL setup
- Monitoring and maintenance

### ‚úÖ [DEPLOYMENT_CHECKLIST.md](DEPLOYMENT_CHECKLIST.md)
Step-by-step checklist to ensure nothing is missed during deployment.

## üõ†Ô∏è Configuration Files

### `welcome.html`
Professional welcome page served at the root URL. Edit this file to customize your landing page.

### `nginx.conf`
Nginx configuration template (reference only). The actual config is generated by setup scripts.

### `droplet-setup.sh`
Main setup script for Droplet deployment. **Idempotent** - safe to run multiple times.
- Installs Docker, nginx, certbot
- Clones/updates repository
- Copies welcome page from repo
- Configures nginx
- Starts application

### `update-nginx-welcome.sh`
Quick update script for existing droplets. Updates welcome page and nginx config without touching Docker or .env.

### `app.yaml`
DigitalOcean App Platform configuration file (alternative deployment method).

## üéØ Which Deployment Option?

### App Platform (Recommended) ‚≠ê
**Best for most users**
- ‚úÖ 5-minute setup
- ‚úÖ Fully managed
- ‚úÖ Auto-scaling
- ‚úÖ Built-in SSL
- ‚úÖ $5-12/month
- ‚ùå Less control

**Use when:**
- You want easy deployment
- You don't want to manage servers
- You need automatic scaling
- You want built-in monitoring

### Droplet (VPS)
**For advanced users**
- ‚úÖ Full control
- ‚úÖ Custom configurations
- ‚úÖ Multiple services
- ‚úÖ $6+/month
- ‚ùå Manual maintenance
- ‚ùå More complex setup

**Use when:**
- You need full server access
- You want to run multiple services
- You're comfortable with Linux
- You need custom configurations

## üìä Cost Breakdown

| Service | Plan | RAM | CPU | Cost/Month | Best For |
|---------|------|-----|-----|------------|----------|
| **App Platform** | Basic | 512MB | 1 | $5 | Testing |
| **App Platform** | Basic | 1GB | 1 | $12 | Production ‚≠ê |
| **App Platform** | Professional | 2GB | 1 | $24 | High traffic |
| **Droplet** | Basic | 1GB | 1 | $6 | DIY |
| **Droplet** | Basic | 2GB | 1 | $12 | DIY Production |

## üöÄ Quick Start Commands

### App Platform (Web UI)
1. Go to https://cloud.digitalocean.com/apps
2. Click "Create App"
3. Follow the wizard

### App Platform (CLI)
```bash
# Install doctl
brew install doctl  # macOS
# or download from: https://docs.digitalocean.com/reference/doctl/

# Authenticate
doctl auth init

# Deploy
doctl apps create --spec .digitalocean/app.yaml
```

### Droplet
```bash
# Create Droplet via web UI, then:
ssh root@YOUR_DROPLET_IP

# Run automated setup
curl -fsSL https://raw.githubusercontent.com/YOUR_USERNAME/YOUR_REPO/main/.digitalocean/droplet-setup.sh | bash
```

## üîê Security Checklist

Before deploying:
- [ ] Set strong `WEBHOOK_SECRET`
- [ ] Mark `ASTERDEX_PRIVATE_KEY` as encrypted
- [ ] Enable HTTPS
- [ ] Set `LOG_LEVEL=INFO` or `WARNING`
- [ ] Enable firewall (Droplet only)
- [ ] Set up monitoring

## üìà Post-Deployment

### Verify Deployment
```bash
# Health check
curl https://your-app-url/health

# API docs (visit in browser)
https://your-app-url/docs
```

### Configure TradingView
1. Go to TradingView alert settings
2. Set webhook URL: `https://your-app-url/webhook/tradingview`
3. Add header: `X-Webhook-Secret: your-secret`

### Monitor
- **App Platform**: Built-in metrics in dashboard
- **Droplet**: `docker compose logs -f`

## üÜò Troubleshooting

### Build Fails
- Check Dockerfile syntax
- Verify all dependencies in requirements.txt
- Review build logs

### App Crashes
- Check environment variables
- Review runtime logs
- Verify health endpoint

### Webhook Not Working
- Verify URL is publicly accessible
- Check webhook secret
- Review logs for incoming requests

## üìö Additional Resources

- [DigitalOcean App Platform Docs](https://docs.digitalocean.com/products/app-platform/)
- [DigitalOcean Droplet Docs](https://docs.digitalocean.com/products/droplets/)
- [Docker Documentation](https://docs.docker.com/)
- [FastAPI Deployment](https://fastapi.tiangolo.com/deployment/)

## ü§ù Support

- **Project Issues**: [GitHub Issues](YOUR_REPO_URL/issues)
- **DigitalOcean Support**: https://www.digitalocean.com/support
- **Community**: [DigitalOcean Community](https://www.digitalocean.com/community)

---

**Need help?** Start with [QUICK_START.md](QUICK_START.md) or the [full deployment guide](../DIGITALOCEAN_DEPLOYMENT.md).
